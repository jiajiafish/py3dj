{% extends "./base.html" %}



{% block pagecontent %}
    <script src="./../static/js/fileinput.js"></script>
    <link rel="stylesheet" href="./../static/css/fileinput.min.css">
    <script src="./../static/js/zh.js"></script>
    <div class="container adl-detail">
        <div class="row">

            <div class="col-sm-12">
                <div class="carditems clearfix">
                    <div class="color-bar-newcomer color-bar">

                    </div>
                    <div class="newcomer-form">
                        <div class="col-sm-5">
                            <form class="form-horizontal">
                                <div class="form-group">
                                    <label for="inputEmail1" class="col-sm-4 control-label">名称</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="inputEmail1" placeholder="名称">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputEmail2" class="col-sm-4 control-label">类型</label>
                                    <div class="col-sm-8">

                                        <select class="form-control">
                                            {% for type in types %}
                                                <option>{{ type.name }}</option>

                                            {% endfor %}


                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputEmail3" class="col-sm-4 control-label">结构号</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="inputEmail3" placeholder="结构号">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputEmail31" class="col-sm-4 control-label">地区</label>
                                    <div class="col-sm-8">
                                        <select class="form-control">
                                            {% for region in regions %}
                                                <option>{{ region.name }}</option>

                                            {% endfor %}

                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputEmail4" class="col-sm-4 control-label">颜色代码名称</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="inputEmail4" placeholder="颜色代码名称">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputEmail5" class="col-sm-4 control-label">光泽度</label>
                                    <div class="col-sm-8">
                                        <select class="form-control">
                                            {% for glossy in glossys %}
                                                <option>{{ glossy.name }}</option>

                                            {% endfor %}


                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputEmail6" class="col-sm-4 control-label">标准样板号</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="inputEmail6"
                                               placeholder="ATX-XX-XX">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputEmail7" class="col-sm-4 control-label">当前在库数量</label>
                                    <div class="col-sm-8">
                                        <input type="number" min="1" class="form-control" id="inputEmail7"
                                               placeholder="当前在库数量">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputEmail8" class="col-sm-4 control-label">到期时间</label>
                                    <div class="col-sm-8">
                                        <input type="date" class="form-control" id="inputEmail8" placeholder="到期时间">
                                    </div>
                                </div>


                                <!--<div class="form-group" style="display: inline-block">-->
                                <!--<div class="col-sm-offset-2 col-sm-8">-->
                                <!--<button type="submit" class="btn btn-default">入库</button>-->
                                <!--</div>-->
                                <!--<div class="col-sm-offset-2 col-sm-8">-->
                                <!--<button type="submit" class="btn btn-default">添加下一个</button>-->
                                <!--</div>-->
                                <!--</div>-->
                                <nav aria-label="..." class="detail-table">
                                    <ul class="pager ">
                                        <li><a href="#" class=" success"><span class="glyphicon glyphicon-floppy-saved"
                                                                               aria-hidden="true"> </span> 入库</a></li>
                                        <span class="divide-button"> </span>
                                        <li><a href="/newcome" class="alert-link">
                                            <span class="glyphicon glyphicon-ok" aria-hidden="true"> </span> 下一个</a>
                                        </li>
                                    </ul>
                                </nav>
                            </form>

                        </div>
                        <div class="col-sm-1">
                        </div>
                        {#                        <script>#}
                        {#                            var res_licenseImg;#}
                        {#                            $("#file_licenseImg").fileinput({#}
                        {#                                language: 'zh',#}
                        {#                                uploadUrl: '/uploadfiles',#}
                        {#                                allowedFileExtensions: ['jpg', 'png'],#}
                        {#                                maxFileSize: 5000,#}
                        {#                                maxFilesNum: 1,#}
                        {#                                showCaption: false,#}
                        {#                                showUpload: false,#}
                        {#                                slugCallback: function (filename) {#}
                        {#                                    console.log("sss");#}
                        {#                                    return filename.replace('(', '_').replace(']', '_');#}
                        {##}
                        {##}
                        {#                                }#}
                        {#                            });#}
                        {##}
                        {#                            $('#file_licenseImg').on('fileuploaded', function (event, data, previewId, index) {#}
                        {#                                res_licenseImg = data.response.imgurl;#}
                        {#                                // console.log(res_licenseImg);#}
                        {#                                alert("jxl");#}
                        {#                                if (res_licenseImg) {#}
                        {#                                    $('.imgReg').css('display', 'inline')#}
                        {#                                    $('#file_licenseImg').css('display', 'none');#}
                        {#                                    $('.btn-file').css('display', 'none');#}
                        {#                                }#}
                        {#                                $('.fileinput-remove').click(function () {#}
                        {#                                    $('#file_licenseImg').css('display', 'inline-block');#}
                        {#                                    $('.btn-file').css('display', 'inline-block');#}
                        {#                                })#}
                        {#                            })#}
                        {##}
                        {##}
                        {#                        </script>#}
                        <script>
                            $(document).ready(function () {
                                $("#file_licenseImg").fileinput({
                                    showUpload: false,
                                    language: 'zh',
                                    uploadAsync: true,
                                    dropZoneEnabled: false,
                                    showupload: false,
                                    uploadUrl: 'http://127.0.0.1:8000/uploadfiles/',
                                    maxFileCount: 1,
                                    maxImageWidth: 60000,
                                    resizeImage: true,
                                    showCaption: false,
                                    showPreview: false,
                                    browseClass: "btn btn-primary btn-lg",
                                    allowedFileExtensions: ['jpg', 'png'],
                                    previewFileIcon: ""
                                }).on("filebatchselected", function (event, files) {
                                    console.log("111");
                                    $(this).fileinput("upload");
                                    console.log("222");

                                })
                                    .on("fileuploaded", function (event, data) {
                                        if (data.response) {
                                            alert('处理成功');
                                        }
                                    });
                            })
                        </script>
                        <div class="col-sm-5">
                            <input id="file_licenseImg" type="file" class="file"/>

                            {#                            <form action="">#}
                            {#                                <input id="upload" style="display: none;" type="file">#}
                            {#                                <label for="upload">#}
                            {#                                    <a href="#" class="thumbnail">#}
                            {#                                        <img src="./../static/img/uploadfile.png" alt="...">#}
                            {#                                    </a>#}
                            {#                                </label>#}
                            {#                            </form>#}

                            </form>
                            `
                        </div>

                    </div>

                </div>

            </div>

        </div>
    </div>

{% endblock %}










